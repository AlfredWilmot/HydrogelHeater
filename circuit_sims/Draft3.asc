Version 4
SHEET 1 3596 756
WIRE 2464 -400 2384 -400
WIRE 2880 -400 2800 -400
WIRE 2048 -368 2016 -368
WIRE 2176 -368 2128 -368
WIRE 3136 -368 3088 -368
WIRE 3248 -368 3216 -368
WIRE 816 -352 800 -352
WIRE 512 -320 480 -320
WIRE 2384 -320 2384 -400
WIRE 2880 -320 2880 -400
WIRE 640 -304 576 -304
WIRE 800 -304 800 -352
WIRE 800 -304 640 -304
WIRE 928 -304 800 -304
WIRE 1040 -304 1008 -304
WIRE 1104 -304 1040 -304
WIRE 1216 -304 1184 -304
WIRE 1312 -304 1216 -304
WIRE 2096 -304 2080 -304
WIRE 3184 -304 3168 -304
WIRE 512 -288 480 -288
WIRE 1040 -272 1040 -304
WIRE 1216 -272 1216 -304
WIRE 2080 -272 2080 -304
WIRE 3184 -272 3184 -304
WIRE 544 -256 544 -272
WIRE 2048 -256 1984 -256
WIRE 3280 -256 3216 -256
WIRE 2176 -240 2176 -368
WIRE 2176 -240 2112 -240
WIRE 2336 -240 2256 -240
WIRE 3008 -240 2928 -240
WIRE 3088 -240 3088 -368
WIRE 3152 -240 3088 -240
WIRE 2016 -224 2016 -368
WIRE 2016 -224 1936 -224
WIRE 2048 -224 2016 -224
WIRE 3248 -224 3248 -368
WIRE 3248 -224 3216 -224
WIRE 3328 -224 3248 -224
WIRE 480 -192 480 -288
WIRE 512 -192 480 -192
WIRE 640 -192 640 -304
WIRE 640 -192 592 -192
WIRE 1984 -128 1984 -256
WIRE 2048 -128 1984 -128
WIRE 2176 -128 2176 -240
WIRE 2176 -128 2112 -128
WIRE 3088 -128 3088 -240
WIRE 3152 -128 3088 -128
WIRE 3280 -128 3280 -256
WIRE 3280 -128 3216 -128
WIRE 816 -48 800 -48
WIRE 512 -16 480 -16
WIRE 640 0 576 0
WIRE 800 0 800 -48
WIRE 800 0 640 0
WIRE 928 0 800 0
WIRE 1040 0 1008 0
WIRE 1104 0 1040 0
WIRE 1216 0 1184 0
WIRE 1312 0 1216 0
WIRE 512 16 480 16
WIRE 1040 32 1040 0
WIRE 1216 32 1216 0
WIRE 2176 32 2080 32
WIRE 2352 32 2256 32
WIRE 3008 32 2912 32
WIRE 3184 32 3088 32
WIRE 2384 48 2384 -224
WIRE 2384 48 2336 48
WIRE 2880 48 2880 -224
WIRE 2928 48 2880 48
WIRE 2080 64 2064 64
WIRE 3200 64 3184 64
WIRE 1984 80 1984 -48
WIRE 2000 80 2000 32
WIRE 2000 80 1984 80
WIRE 3264 80 3264 32
WIRE 3280 80 3280 -48
WIRE 3280 80 3264 80
WIRE 2064 96 2064 64
WIRE 3200 96 3200 64
WIRE 2176 112 2176 32
WIRE 2176 112 2096 112
WIRE 3088 112 3088 32
WIRE 3168 112 3088 112
WIRE 480 128 480 16
WIRE 512 128 480 128
WIRE 640 128 640 0
WIRE 640 128 592 128
WIRE 2000 128 2000 80
WIRE 2032 128 2000 128
WIRE 2352 128 2352 32
WIRE 2384 128 2352 128
WIRE 2912 128 2912 32
WIRE 2912 128 2880 128
WIRE 3264 128 3264 80
WIRE 3264 128 3232 128
WIRE 2176 144 2096 144
WIRE 2336 144 2336 48
WIRE 2336 144 2256 144
WIRE 2928 144 2928 48
WIRE 3008 144 2928 144
WIRE 3168 144 3088 144
WIRE -288 192 -288 144
WIRE 2384 192 2384 128
WIRE 2880 192 2880 128
FLAG -144 272 0
FLAG -288 272 0
FLAG -288 144 pwm_in
IOPIN -288 144 BiDir
FLAG -144 192 3V3
IOPIN -144 192 BiDir
FLAG 544 -256 0
FLAG 400 -320 pwm_in
IOPIN 400 -320 BiDir
FLAG 480 -112 0
FLAG 800 -224 0
FLAG 544 -32 0
FLAG 400 -16 pwm_in
IOPIN 400 -16 BiDir
FLAG 480 208 0
FLAG 800 80 0
FLAG 816 -48 pwm
IOPIN 816 -48 BiDir
FLAG 816 -352 !pwm
IOPIN 816 -352 BiDir
FLAG 2080 -208 0
FLAG 2384 192 0
FLAG 2064 160 0
FLAG 544 -336 3V3
IOPIN 544 -336 BiDir
FLAG 544 32 3V3
IOPIN 544 32 BiDir
FLAG 2080 64 3V3
IOPIN 2080 64 BiDir
FLAG 2096 -304 3V3
IOPIN 2096 -304 BiDir
FLAG 0 272 0
FLAG 0 192 PWR
IOPIN 0 192 BiDir
FLAG 2464 -400 PWR
IOPIN 2464 -400 BiDir
FLAG 1040 -208 0
FLAG 1216 -208 0
FLAG 1040 96 0
FLAG 1216 96 0
FLAG 1312 0 load_side
IOPIN 1312 0 BiDir
FLAG 1312 -304 shunt_side
IOPIN 1312 -304 BiDir
FLAG 1856 -224 load_side
IOPIN 1856 -224 BiDir
FLAG 3184 -208 0
FLAG 2880 192 0
FLAG 3200 160 0
FLAG 3184 64 3V3
IOPIN 3184 64 BiDir
FLAG 3168 -304 3V3
IOPIN 3168 -304 BiDir
FLAG 2800 -400 PWR
IOPIN 2800 -400 BiDir
FLAG 3408 -224 shunt_side
IOPIN 3408 -224 BiDir
SYMBOL voltage -288 176 R0
WINDOW 3 -65 144 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3.3 5ms 10ns 10ns 0.1s 1ms)
SYMATTR InstName V1
SYMBOL voltage -144 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL uA741 544 -368 R0
SYMATTR InstName U1
SYMBOL res 464 -208 R0
WINDOW 0 -41 38 Left 2
WINDOW 3 -36 73 Left 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 608 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 816 -208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1000k
SYMBOL res 496 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 50k
SYMBOL uA741 544 64 M180
WINDOW 0 12 32 Left 2
SYMATTR InstName U2
SYMBOL res 464 112 R0
WINDOW 0 -41 38 Left 2
WINDOW 3 -36 73 Left 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 608 112 R90
WINDOW 0 10 13 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res 816 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 1000k
SYMBOL res 496 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 50k
SYMBOL uA741 2080 -304 R0
SYMATTR InstName U3
SYMBOL uA741 2064 64 M0
WINDOW 3 -51 131 Left 2
SYMATTR InstName U4
SYMBOL cap 2112 -144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100nF
SYMBOL res 2272 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 560
SYMBOL nmos 2336 -320 R0
SYMATTR InstName M1
SYMATTR Value IRF6620
SYMBOL res 2368 32 R0
SYMATTR InstName R11
SYMATTR Value 0.1
SYMBOL res 1968 -144 R0
WINDOW 0 -37 19 Left 2
WINDOW 3 -44 58 Left 2
SYMATTR InstName R13
SYMATTR Value 15k
SYMBOL res 2096 16 R90
WINDOW 0 56 62 VBottom 2
WINDOW 3 -27 51 VTop 2
SYMATTR InstName R9
SYMATTR Value 190k
SYMBOL res 2272 16 R90
WINDOW 0 61 57 VBottom 2
WINDOW 3 -29 52 VTop 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res 2272 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 15k
SYMBOL res 1952 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 2144 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 1000k
SYMBOL voltage 0 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res 1024 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL cap 1024 -272 R0
SYMATTR InstName C2
SYMATTR Value 100nF
SYMBOL res 1200 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 100k
SYMBOL cap 1200 -272 R0
SYMATTR InstName C3
SYMATTR Value 100nF
SYMBOL res 1024 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL cap 1024 32 R0
SYMATTR InstName C4
SYMATTR Value 100nF
SYMBOL res 1200 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 100k
SYMBOL cap 1200 32 R0
SYMATTR InstName C5
SYMATTR Value 100nF
SYMBOL uA741 3184 -304 M0
SYMATTR InstName U5
SYMBOL uA741 3200 64 R0
WINDOW 3 -51 131 Left 2
SYMATTR InstName U6
SYMBOL cap 3152 -144 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100nF
SYMBOL res 2992 -256 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 560
SYMBOL nmos 2928 -320 M0
SYMATTR InstName M2
SYMATTR Value IRF6620
SYMBOL res 2896 32 M0
SYMATTR InstName R22
SYMATTR Value 0.1
SYMBOL res 3296 -144 M0
WINDOW 0 -37 19 Left 2
WINDOW 3 -44 58 Left 2
SYMATTR InstName R23
SYMATTR Value 15k
SYMBOL res 3168 16 M90
WINDOW 0 56 62 VBottom 2
WINDOW 3 -27 51 VTop 2
SYMATTR InstName R24
SYMATTR Value 190k
SYMBOL res 2992 16 M90
WINDOW 0 61 57 VBottom 2
WINDOW 3 -29 52 VTop 2
SYMATTR InstName R25
SYMATTR Value 10k
SYMBOL res 2992 128 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 15k
SYMBOL res 3312 -240 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 10k
SYMBOL res 3120 -384 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 1000k
TEXT -360 352 Left 2 !.tran 0 0.2s 0 1ms
TEXT 304 280 Left 2 ;Inverting and non-inverting schmitt triggers \n(so two PWM signals are as complimentary as possible).\n \nSchmitt trigger design taken from here: \nhttps://www.circuitstoday.com/schmitt-trigger-using-op-amp
TEXT -368 392 Left 2 ;3.3V supply, and a single PWM signal from an MCU
